<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Abrir múltiples enlaces</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body{font-family:Segoe UI,Arial;padding:20px}
    #msg{margin-left:12px;color:#555}
    ul{margin-top:14px}
  </style>
</head>
<body>
  <ul id="list"></ul>
  <script>
  (function () {
    const qs = new URLSearchParams(location.search);
    let raw = qs.get("u") || "";
    if (!raw && location.hash) raw = location.hash.slice(1);

    const originalUrls = (raw||"")
      .split("|")
      .map(decodeURIComponent)
      .map(s => s.trim())
      .filter(Boolean);

    const ul  = document.getElementById("list");

    if (originalUrls.length === 0) {
      ul.innerHTML = "<li>No llegaron enlaces.</li>";
      return;
    }

    function toDownloadLink(u){
      const m = u.match(/https?:\/\/drive\.google\.com\/file\/d\/([^/]+)/i);
      if (m && m[1]) return "https://drive.usercontent.google.com/download?id=" + m[1];
      if (/drive\.google\.com\/uc\?/.test(u)) return u;
      return u;
    }

    // Mostrar lista de enlaces
    originalUrls.forEach(u=>{
      const li=document.createElement("li");
      const a=document.createElement("a");
      a.href=u; a.target="_blank"; a.rel="noopener";
      a.textContent=u;
      li.appendChild(a);
      ul.appendChild(li);
    });

    // Abrir automáticamente los enlaces
    const downloads = originalUrls.map(toDownloadLink);
    try {
      downloads.forEach(u => window.open(u, "_blank"));
    } catch(e){}
  })();
  </script>
</body>
</html>
